"use strict";var $=require("jquery"),UI=require("./core"),ScrollSpy=function(i,t){if(UI.support.animation){this.options=$.extend({},ScrollSpy.DEFAULTS,t),this.$element=$(i);var e=function(){UI.utils.rAF.call(window,$.proxy(this.checkView,this))}.bind(this);this.$window=$(window).on("scroll.scrollspy.amui",e).on("resize.scrollspy.amui orientationchange.scrollspy.amui",UI.utils.debounce(e,50)),this.timer=this.inViewState=this.initInView=null,e()}};ScrollSpy.DEFAULTS={animation:"fade",className:{inView:"am-scrollspy-inview",init:"am-scrollspy-init"},repeat:!0,delay:0,topOffset:0,leftOffset:0},ScrollSpy.prototype.checkView=function(){var i=this.$element,t=this.options,e=UI.utils.isInView(i,t),s=t.animation?" am-animation-"+t.animation:"";e&&!this.inViewState&&(this.timer&&clearTimeout(this.timer),this.initInView||(i.addClass(t.className.init),this.offset=i.offset(),this.initInView=!0,i.trigger("init.scrollspy.amui")),this.timer=setTimeout(function(){e&&i.addClass(t.className.inView+s).width()},t.delay),this.inViewState=!0,i.trigger("inview.scrollspy.amui")),!e&&this.inViewState&&t.repeat&&(i.removeClass(t.className.inView+s),this.inViewState=!1,i.trigger("outview.scrollspy.amui"))},ScrollSpy.prototype.check=function(){UI.utils.rAF.call(window,$.proxy(this.checkView,this))},UI.plugin("scrollspy",ScrollSpy),UI.ready(function(i){$("[data-am-scrollspy]",i).scrollspy()}),module.exports=ScrollSpy;